{% extends 'moduloTV/base.html' %}
{% block content %}
<hr>
<style>
    .banner {
        display: flex;
        justify-content: space-between;
        justify-content: space-around;
        align-items: center;
        padding: 10px;
        flex-direction: row;
        background-color: #f0f0f0;
    }

    .equipo-info {
        display: flex;
        align-items: center;
        flex-direction: column;

    }

    .nombre-equipo {
        font-weight: bold;

    }

    .goles-equipo {
        font-size: 24px;
        margin-right: 10px;
    }

    .versus {
        font-size: 24px;
        font-weight: bold;
    }

    .equipo-info img {
        width: 50px;
        height: auto;
        margin-right: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
</style>

<div class="container">
    <div class="row">
        <div style="display: none;">
            {% with equipo_local=equipo_local %}
            <input type="text" id="logoLocal" name="logoLocal" value="{{ equipo_local.equipo.logo  }}">
            <input type="text" id="nombreLocal" name="nombreLocal" value="{{ equipo_local.equipo.nombre }}">
            <input type="text" id="golesLocal" name="golesLocal" value="{{ equipo_local.goles|default:'0' }}">

            {% endwith %}

            {% with equipo_visita=equipo_visita %}

            <input type="text" id="logoVisita" name="logoVisita" value="{{ equipo_visita.equipo.logo  }}">
            <input type="text" id="nombreVisita" name="nombreVisita" value="{{ equipo_visita.equipo.nombre }}">
            <input type="text" id="golesVisita" name="golesVisita" value="{{ equipo_visita.goles|default:'0' }}">

            {% endwith %}
        </div>
        <!-- Datos de Encuentro -->
        <div class="col-md-4">
            <form id="enviarDatosEncuentro" method="post" action="{% url 'mostrar_eventos_generales' idEncuentro %}"
                enctype="multipart/form-data">

                {% csrf_token %}

                <div class="card">
                    <div class="card-header form-inline">
                        <h3>Datos de Encuentro</h3>
                        <div class="align-items-center">Duración (s): </div>
                        &nbsp;
                        <div class="input-group">

                            <input type="number" class="form-control" id="tiempo" value="10" name="tiempo" min="1"
                                max="59">
                            &nbsp;
                            <button type="button" class="btn btn-primary" id="generarBannerEncuentro"><i
                                    class="fas fa-eye"></i> Mostrar</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="form-check" style="display: none;">
                                <input type="checkbox" class="form-check-input" id="temperaturaCheckbox"
                                    value="{% with equipo_local=equipo_local %}{{ equipo_local.encuentro.clima }}{% endwith %}">
                                <label class="form-check-label" for="temperaturaCheckboxx">Temperatura</label>
                                <!-- <input type="text" class="form-control" id="temperaturaInput"
                                    placeholder="Ingrese la temperatura"> -->
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="marcadorCheckbox"
                                    value="{% with equipo_local=equipo_local %}{{ equipo_local.goles }}{% endwith %} - {% with equipo_visita=equipo_visita %}{{ equipo_visita.goles }}{% endwith %}">
                                <label class="form-check-label" for="marcadorCheckbox">Marcador</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="estadioCheckbox"
                                    value="{% with equipo_local=equipo_local %}{{ equipo_local.encuentro.sede_id }}{% endwith %}">
                                <label class="form-check-label" for="estadioCheckbox">Estadio</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="tipoEncuentroCheckbox"
                                    value="{% with equipo_local=equipo_local %}{{ equipo_local.encuentro.competicion_id }} - {{ equipo_local.encuentro.grupo }} - {{ equipo_local.encuentro.fase }}{% endwith %}">
                                <label class="form-check-label" for="tipoEncuentroCheckbox">Tipo de Encuentro</label>
                            </div>
                            <!-- <div class="form-check" style="display: none;">
                                <input type="checkbox" class="form-check-input" id="patrocinadorCheckbox">
                                <label class="form-check-label" for="patrocinadorCheckbox">Patrocinador</label>
                            </div> -->
                        </form>
                    </div>
                </div>
                <!-- <textarea id="miTextarea" name="miTextarea"></textarea> -->

            </form>
        </div>




        <!-- Cronómetro -->
        <div class="col-md-4">
            <form id="cronometroForm">
                {% csrf_token %}
                <div class="card">
                    <div class="card-header">
                        <h3>Cronómetro</h3>
                        <div class="input-group">
                            <input type="text" class="form-control" id="tiempoCrono" name="tiempoCrono"
                                pattern="[0-9]{2}:[0-9]{2}" placeholder="MM:SS" title="Formato válido: MM:SS" required>
                            <button type="button" class="btn btn-success" id="btnlimpiarplay"
                                onclick="enviarComando('play')">
                                <i class="fas fa-play"></i>
                            </button>
                            <button type="button" class="btn btn-warning" onclick="enviarComando('pausa')">
                                <i class="fas fa-pause"></i>
                            </button>
                            &nbsp;
                            <button type="button" class="btn btn-primary" onclick="enviarComando('mostrar')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button type="button" class="btn btn-danger" onclick="enviarComando('ocultar')">
                                <i class="fas fa-eye-slash"></i>
                            </button>
                            <button type="button" class="btn btn-info" onclick="enviarComando('reset')">
                                <i class="fas fa-undo"></i>
                            </button>
                        </div>
                    </div>

                </div>
            </form>
        </div>

        <!-- Himnos -->
        <div class="col-md-4">
            <form id="enviarDatosHimno" method="post" action="{% url 'mostrar_eventos_generales' idEncuentro %}"
                enctype="multipart/form-data">
                {% csrf_token %}
                <div class="card">
                    <div class="card-header">
                        <h3>Himnos</h3>

                        <div class="input-group align-items-center  ">
                            <div class="align-items-center">Duración (s): </div>
                            &nbsp;
                            <input type="number" class="form-control" id="tiempo" value="10" name="tiempo" min="1"
                                max="59">
                            &nbsp;
                            <button type="button" class="btn btn-primary" id="generarBannerHimno"><i
                                    class="fas fa-eye"></i> Mostrar</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="localHimno" name="himno" value="local">
                                &nbsp;
                                <label class="form-check-label" for="localHimno">Local</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="visitaHimno" name="himno"
                                    value="visita">
                                <label class="form-check-label" for="visitaHimno">Visita</label>
                            </div>
                        </form>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Alineación -->
    <div class="row mt-4">
        <div class="col-md-6">
            <form id="enviarDatosAlineacionLocal" method="post"
                action="{% url 'mostrar_eventos_generales' idEncuentro %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="card">
                    <div class="card-header">
                        <h3>Alineación Local</h3>
                        <div class="input-group align-items-center">
                            <div class="align-items-center">Duración (s): </div>
                            &nbsp;

                            <input type="number" class="form-control" id="tiempo" value="10" name="tiempo" min="1"
                                max="59">
                            &nbsp;
                            <button type="submit" id="generarBannerAlineacionLocal" class="btn btn-primary"><i
                                    class="fas fa-eye"></i> Mostrar</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-check" style="display: block;">
                            <input type="checkbox" class="form-check-input" id="mostrarAlineacionLocalCheckbox">
                            <h5 class="form-check-label" for="alineacionLocalCheckbox">Mostrar alineacion</h5>
                        </div>
                        <div id="contenedorTabla" style="display: flex; justify-content: center;">

                            <table id="tablaLocal" style="width: 80%;">
                                <thead>
                                    <tr style="text-align: center;">
                                        <th style="padding: 10px;">Dorsal</th>
                                        <th style="padding: 10px;">Jugador</th>
                                        <th style="padding: 10px;">Posicion</th>
                                        <th style="padding: 10px;">Seleccionar</th>
                                    </tr>
                                </thead>
                                <tbody style="border-collapse: collapse; margin-top: 20px; text-align: center;">
                                    <!-- Aquí se llenarán dinámicamente los datos -->
                                    {% for a_l in alineacion_local %}
                                    <tr style="border-bottom: 1px solid #ddd;">
                                        <td style="padding: 10px;">{{ a_l.dorsal }}</td>
                                        <td style="padding: 10px;">{{ a_l.contrato_id.persona.alias }}</td>
                                        <td style="padding: 10px;">{{ a_l.posicion_jugador_id }}</td>
                                        <td style="padding: 10px; display: none;">{{ a_l.estado }}</td>
                                        <td style="padding: 10px; display: none;">{{ a_l.contrato_id.contrato_id }}</td>

                                        <td style="padding: 10px;">
                                            <input type="radio" class="form-check-input" data-radio="true"
                                                id="alineacionLocal{{ forloop.counter }}" name="alineacion"
                                                value="local"
                                                onclick="capturarDatos('alineacionLocal',{{ forloop.counter }})">
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <!-- Probar -->
                        &nbsp;
                        <div>
                            <div class="form-check">
                                <input type="radio" name="finalType" class="form-check-input"
                                    id="LtarjetasAmarillasCheckbox" value=1>
                                <label name="finalType" class="form-check-label"
                                    for="LtarjetasAmarillasCheckbox">Tarjetas amarillas</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="finalType" class="form-check-input"
                                    id="LtarjetasRojasCheckbox" value=2>
                                <label class="form-check-label" for="LtarjetasRojasCheckbox">Tarjetas rojas</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" name="finalType" class="form-check-input" id="LgolesTotalesCheckbox"
                                    value=3>
                                <label class="form-check-label" for="LgolesTotalesCheckbox">Goles totales</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="LpatrocinadorCheckbox" value=4>
                                <label class="form-check-label" for="LpatrocinadorCheckbox">Patrocinador</label>
                            </div>
                        </div>
                        <!-- Probar fin -->

                    </div>
                </div>
            </form>
        </div>

        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h3>Alineación Visita</h3>
                    <div class="input-group align-items-center">
                        <div class="align-items-center">Duración (s): </div>
                        &nbsp;

                        <input type="number" class="form-control" id="tiempo" value="10" name="tiempo" min="1" max="59">
                        &nbsp;
                        <button type="submit" class="btn btn-primary"><i class="fas fa-eye"></i> Mostrar</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="form-check" style="display: block;">
                        <input type="checkbox" class="form-check-input" id="patrocinadorCheckbox">
                        <h5 class="form-check-label" for="alineacionVisitaCheckbox">Mostrar alineacion</h5>
                    </div>

                    <div id="contenedorTabla" style="display: flex; justify-content: center;">

                        <table style="width: 80%;">
                            <thead>
                                <tr style="text-align: center;">
                                    <th style="padding: 10px;">Dorsal</th>
                                    <th style="padding: 10px;">Jugador</th>
                                    <th style="padding: 10px;">Posicion</th>
                                    <th style="padding: 10px;">Seleccionar</th>
                                </tr>
                            </thead>
                            <tbody style="border-collapse: collapse; margin-top: 20px; text-align: center;">
                                <!-- Aquí se llenarán dinámicamente los datos -->
                                {% for a_l in alineacion_visita %}
                                <tr style="border-bottom: 1px solid #ddd;">
                                    <td style="padding: 10px;">{{ a_l.dorsal }}</td>
                                    <td style="padding: 10px;">{{ a_l.contrato_id.persona.alias }}</td>
                                    <td style="padding: 10px;">{{ a_l.posicion_jugador_id }}</td>
                                    <td style="padding: 10px; display: none;">{{ a_l.estado }}</td>
                                    <td style="padding: 10px;">
                                        <input type="radio" class="form-check-input"
                                            id="alineacionVisita{{ forloop.counter }}" name="alineacion" value="visita"
                                            onclick="capturarDatos('alineacionVisita',{{ forloop.counter }})">
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--  -->
    <div class="row mt-4">
        <!--Marcador-->
        <div class="col-md-6">
            <form id="enviarDatosMarcadorCompleto" method="post" action="{% url 'mostrar_eventos_generales' idEncuentro %}"
                enctype="multipart/form-data">
                {% csrf_token %}
            <div class="card">
                <div class="card-header">
                    <h3>Marcador completo</h3>
                    <div class="input-group align-items-center">
                        <div class="align-items-center">Duración (s):</div>
                        &nbsp;

                        <input type="number" class="form-control" id="tiempo" value="10" name="tiempo" min="1" max="59">
                        &nbsp;
                        <button type="submit" id="generarBannerMarcador" class="btn btn-primary"><i
                                class="fas fa-eye"></i> Mostrar</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col">
                            <!-- Primera columna -->
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="f1Checkbox" name="finalType"
                                    value="1er. Tiempo">
                                <label class="form-check-label" for="f1Checkbox">Final 1° Tiempo</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="f2Checkbox" name="finalType"
                                    value="2do. Tiempo">
                                <label class="form-check-label" for="f2Checkbox">Final 2° Tiempo</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="feCheckbox" name="finalType"
                                    value="Tiempo extra">
                                <label class="form-check-label" for="feCheckbox">Final Tiempo Extra</label>
                            </div>
                        </div>
                        <div class="col">
                            <!-- Segunda columna -->
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="fpCheckbox" name="finalType"
                                    value="Penales">
                                <label class="form-check-label" for="fpCheckbox">Final + Penales</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="estadioMarcadorCompleto" name="eCheckbox"
                                    value="{% with equipo_local=equipo_local %}{{ equipo_local.encuentro.sede_id }}{% endwith %}">
                                <label class="form-check-label" for="eCheckbox">Estadio</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="ieCheckbox" name="ieCheckbox">
                                <label class="form-check-label" for="ieCheckbox">Insignia de Equipo</label>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!--  -->

<!--  -->







<!--  -->


<!-- </div> -->




<!-- Aqui inicia script-->
<!-- <script>
    $(document).ready(function () {
        $('#generarBannerEncuentro').click(function () {
            // Objeto para almacenar las opciones seleccionadas
            var contenidoBannerTextarea = $('#contenido_banner');
            var opcionesSeleccionadas = {};

            // Recorre las casillas de verificación y recopila las selecciones
            $('input[type="checkbox"]').each(function () {
                var checkboxId = $(this).attr('id');
                opcionesSeleccionadas[checkboxId.replace('Checkbox', '')] = $(this).prop('checked');
            });

            // Construye dinámicamente el HTML del banner
            // var bannerHtml = '<div class="banner">';
            // if (opcionesSeleccionadas.temperatura) {
            //     bannerHtml += '<p>Temperatura: <span class="valor-temperatura">[Valor]</span></p>';
            // }
            // // Repite el patrón para otras opciones

            // bannerHtml += '</div>';}
            //Inicio
            var bannerHtml = '<div class="banner">';
            // Equipo Local
            bannerHtml += '<div class="equipo-info">';
            bannerHtml += '<p class="goles-equipo">2</p>';
            bannerHtml += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
            bannerHtml += '<p class="nombre-equipo">Equipo Local</p>';
            bannerHtml += '<img src="/ruta/al/logo_local.png" alt="Equipo Local">';
            var valorCheckbox = document.getElementById('temperaturaCheckbox').value;
            if (opcionesSeleccionadas.temperatura) {
                bannerHtml += '<p>' + valorCheckbox + '</p>';
            }
            bannerHtml += '</div>';
            bannerHtml += '</div>';

            // Versus
            bannerHtml += '<div class="versus">VS</div>';

            // Equipo Visitante
            bannerHtml += '<div class="equipo-info">';
            bannerHtml += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
            bannerHtml += '<p class="nombre-equipo">Equipo Visitante</p>';
            bannerHtml += '<img src="/ruta/al/logo_visita.png" alt="Equipo Visitante">';
            bannerHtml += '<p>Competicion</p>';
            bannerHtml += '</div>';
            bannerHtml += '<p class="goles-equipo">1</p>';
            bannerHtml += '</div>';

            bannerHtml += '</div>';

            var dataToSend = { html: bannerHtml};

            //fin

            // Muestra el banner generado
            $('#bannerContainer').html(bannerHtml);
            $('#contenido_banner').html(bannerHtml);
            contenidoBannerTextarea.val(bannerHtml);



            //  // Enviar el bannerHtml al servidor usando AJAX
            // $.ajax({
            //     type: 'POST',
            //     url: '{% url "mostrar_eventos_generales" idEncuentro %}',  // Reemplaza "guardar_banner" con la URL de tu vista
            //     data: JSON.stringify(dataToSend),
            //     contentType: 'application/json',  // Agregar esta línea para indicar que estás enviando JSON

            //     success: function (data) {
            //         console.log('Banner enviado exitosamente');
            //     },
            //     error: function (error) {
            //         console.error('Error al enviar el banner');
            //     }
            // });


        });
    });
</script>  -->

<!-- Contenedor donde se mostrará el banner generado -->
<div id="bannerContainer" style="display: none;">
    <div class="banner">
        <!-- Equipo Local -->
        <div class="equipo-info">
            <p class="goles-equipo">2</p>
            <div class="row" style="display: flex;
            flex-direction: column;
            align-items: center;">
                <p class="nombre-equipo">Equipo Local</p>

                <img src="/static/images/equipo/logo/7.png" alt="Equipo Local">
                <p>Competicion</p>
            </div>


        </div>

        <!-- Versus -->
        <div class="versus">VS</div>

        <!-- Equipo Visitante -->
        <div class="equipo-info">
            <div class="row" style="display: flex;
            flex-direction: column;
            align-items: center;">
                <p class="nombre-equipo">Equipo Visitante</p>
                <img src="/static/images/equipo/logo/7.png" alt="Equipo Visitante">
                <p>Sede</p>

            </div>
            <p class="goles-equipo">1</p>
        </div>
    </div>
</div>

<div class="form-inline" style="display: none;">
    <!-- Team 1 banner -->
    <div class="team-banner team1-banner"
        style="display: flex; align-items: center; padding: 10px; background-color: #fff; border: 1px solid #ddd; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">
        <div class="score" style="font-size: 24px; font-weight: bold;">2</div>
        <img src="/static/images/equipo/logo/7.png" alt="Team 1 Logo"
            style="width: 50px; height: 50px;object-fit: cover; border-radius: 50%; margin-right: 10px;">
        <div class="col-md-6">
            <div class="team-name" style="font-size: 16px; font-weight: bold;">Equipo local</div>
            <div class="team-name" style="font-size: 16px; font-weight: bold;">Estadio</div>
        </div>

    </div>

    <!-- Team 2 banner -->
    <div class="team-banner team2-banner"
        style=" display: flex; align-items: center; padding: 10px; background-color: #fff; border: 1px solid #ddd; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);">

        <div class="col-md-6">
            <div class="team-name" style="font-size: 16px; font-weight: bold;">Equipo visita</div>
            <div class="team-name" style="font-size: 16px; font-weight: bold;">Tiempo</div>
        </div>

        <img src="/static/images/equipo/logo/7.png" alt="Team 2 Logo"
            style="width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 10px;">
        <div class="score" style="font-size: 24px; font-weight: bold;">1</div>

    </div>


</div>



<!-- Área del banner -->
<div class="banner-container form-inline"
    style="position: absolute;top: -450px; left: 20%; background-color: rgba(0, 0, 0, 0.7); color: white; text-align: center; width: 70%; max-width: 500px; font-size: 30px; border-radius: 5px; z-index: 1;">
    <img src="/static/images/equipo/logo/7.png" alt="Equipo Visitante"
        style="width: 30px; height: auto; margin-right: 10px;">
    <div class="banner-content" style="flex-grow: 1;">
        Himno nacional de Perú
    </div>
</div>
<!-- Aqui acababa scriot -->



<!-- <script>
    // Script para mostrar/ocultar el área del banner según las opciones seleccionadas
    document.addEventListener('DOMContentLoaded', function () {
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        var bannerContainer = document.getElementById('banner-container');

        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                if (checkbox.checked) {
                    bannerContainer.style.display = 'block';
                } else {
                    bannerContainer.style.display = 'none';
                }
            });
        });
    });
</script> -->

<!-- <SCript>

// Obtén los checkboxes por su clase o id
const checkbox1 = document.getElementById('temperaturaCheckbox');
const checkbox2 = document.getElementById('marcadorCheckbox');
const idEncuentro=2
// Función para generar el HTML dinámico
function generarHTML() {
  let html = '';

  // Verifica si el checkbox 1 está seleccionado
  if (checkbox1.checked) {
    html += '<p>Contenido del checkbox 1</p>';
  }

  // Verifica si el checkbox 2 está seleccionado
  if (checkbox2.checked) {
    html += '<p>Contenido del checkbox 2</p>';
  }

  // Devuelve el HTML generado
  return html;
}
const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

// Función para enviar el HTML al servidor
function enviarHTML() {
  // Genera el HTML dinámico
  const dynamicHTML = generarHTML();

  // Realiza una solicitud HTTP POST al servidor
 // Ejemplo si tu proyecto Django tiene un prefijo de URL como '/appname/'
fetch('/admintv/generales/' + idEncuentro + '/', {
    
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRFToken': csrfToken
    },
    body: JSON.stringify({ html: dynamicHTML })
})

    .then(response => {
      // Maneja la respuesta del servidor
      if (response.ok) {
        // El HTML se envió correctamente
        console.log('HTML enviado al servidor');
      } else {
        // Hubo un error al enviar el HTML
        console.error('Error al enviar el HTML al servidor');
      }
    })
    .catch(error => {
      // Maneja los errores de la solicitud
      console.error('Error en la solicitud HTTP:', error);
    });
}

// Evento para enviar el HTML al hacer clic en un botón
const enviarButton = document.getElementById('generarBannerEncuentro');
enviarButton.addEventListener('click', enviarHTML);

</SCript> -->

<!-- <textarea id="miTextarea" name="miTextarea"></textarea> -->

<script>
var miVariable = 'None';

    // Función para generar el HTML dinámico
    function generarHTML() {
        const checkbox1 = document.getElementById('temperaturaCheckbox');
        const checkbox2 = document.getElementById('marcadorCheckbox');
        const checkbox3 = document.getElementById('estadioCheckbox');
        const checkbox4 = document.getElementById('tipoEncuentroCheckbox');

        // const idEncuentro = 2
        let html = '';
        //
        // Construye dinámicamente el HTML del banner
        html = '<div class="banner-container " style="position: absolute;top: -380px; left: 20%; background-color: rgba(0, 0, 0, 0.7); color: white; text-align: center; width: 70%; max-width: 500px; font-size: 13px; border-radius: 5px; ">';
        // Equipo Local
        html += '<div class="equipo-info">';

        // Verifica si el checkbox 2 está seleccionado
        if (checkbox2.checked) {
            html += '<p class="goles-equipo">' + document.getElementById('golesLocal').value + '</p>';
        }
        html += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
        html += '   <p class="nombre-equipo">' + document.getElementById('nombreLocal').value + '</p>';
        html += '   <img src="/static/images/' + document.getElementById('logoLocal').value + '" alt="Equipo Local" style="width: 150px; height: 150px; margin-right: 10px;">';
        //
        // Verifica si el checkbox 1 está seleccionado
        if (checkbox1.checked) {
            html += ''
        }
        html += '</div>';
        html += '</div>';

        // Versus
        html += '<div class="versus">VS</div>';

        // Equipo Visitante
        html += '<div class="equipo-info">';
        html += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
        html += '<p class="nombre-equipo">' + document.getElementById('nombreVisita').value + '</p>';
        html += '<img src="/static/images/' + document.getElementById('logoVisita').value + '" alt="Equipo Visitante" style="width: 180px; height: 180px; margin-right: 10px;">';
        if (checkbox4.checked) {
            html += '<p>' + document.getElementById('tipoEncuentroCheckbox').value + '</p>';
        }

        html += '</div>';
        if (checkbox2.checked) {
            html += '<p class="goles-equipo">' + document.getElementById('golesVisita').value + '</p>';
        }
        html += '</div>';

        html += '</div>';

        // Devuelve el HTML generado
        return html;
    }


    //
    function generarHTMLHimno() {
        const radioLocal = document.getElementById('localHimno');
        const radioVisita = document.getElementById('visitaHimno');

        let html = '';

        // Construye dinámicamente el HTML del banner
        html = '<div class="banner-container form-inline" style="position: absolute;top: -80px; left: 20%; background-color: rgba(0, 0, 0, 0.7); color: white; text-align: center; width: 70%; max-width: 500px; font-size: 13px; border-radius: 5px; ">';

        // Verifica si se seleccionó el himno local
        if (radioLocal.checked) {
            html += '<img src="/static/images/' + document.getElementById('logoLocal').value + '" alt="Equipo Local" style="width: 100px; height: 100px; margin-right: 10px;">';
            html += '<div class="banner-content" style="flex-grow: 1;">Himno nacional de ' + document.getElementById('nombreLocal').value + ' - Local </div>';
        }

        // Verifica si se seleccionó el himno de visita
        if (radioVisita.checked) {
            html += '<img src="/static/images/' + document.getElementById('logoVisita').value + '" alt="Equipo Visitante" style="width: 30px; height: auto; margin-right: 10px;">';
            html += '<div class="banner-content" style="flex-grow: 1;">Himno nacional de ' + document.getElementById('nombreVisita').value + ' - Visita</div>';
        }

        html += '</div>';

        // Devuelve el HTML generado
        return html;
    }

    function generarHTMLMarcadorCompleto() {

        const radioboton = document.getElementById('f1Checkbox');
        const radioboton2 = document.getElementById('f2Checkbox');
        const radioboton3 = document.getElementById('feCheckbox');
        const radioboton4 = document.getElementById('fpCheckbox');

        const casilla = document.getElementById('estadioMarcadorCompleto');
        const casilla2 = document.getElementById('ieCheckbox')

        let html = '';

        // Construye dinámicamente el HTML del banner
            html =       '<div style="display: flex; justify-content: center; align-items: flex-end; height: 80%;">' +
                        '  <div style="display: flex; justify-content: space-between; width: 50%;">' +
                        '    <div name="marcador-local" style="background-color: white; font-size: 2.8em; margin-right: 1%;">' + document.getElementById('golesLocal').value + '</div>' +
                        '    <div name="escudo1" id="equipo1" style="padding-right: 1%;">' +
                        +'    </div>' +
                        '    <div name="container-equipo-informacion" style="width: 100%;">' +
                        '      <div name="Equipos" style="display: flex; font-weight: bold; justify-content: space-between; align-items: center; background-color: rgb(255,42,27);padding: 0.3%;margin-top: 1%;margin-bottom: 1%;">' +
                        '        <div name="equipo_local" style="text-align: left; padding-left: 3%;">' + document.getElementById('nombreLocal').value + '</div>' +
                        '        <div name="equipo_visita" style="text-align: right; padding-right: 3%;">' + document.getElementById('nombreVisita').value + '</div>' +
                        '      </div>' +
                        '      <div name="juego" style="display: flex; justify-content: space-between; opacity: 0.8; background-color: rgb(0,0,0);">' +
                        '        <div name="estadio" style="text-align: left; padding-left: 3%; color: white;">' + document.getElementById('estadioMarcadorCompleto').value + '</div>' +
                        '        <div name="Resumen_Tiempo" id="resumenTiempo" style="text-align: right; padding-right: 3%; color: white;"></div>' +
                        '      </div>' +
                        '    </div>' +
                        '    <div name="escudo2" id="equipo2" style="padding-left: 1%;">' +
                        +'    </div>' +
                        '    <div name="marcador-visita" style="background-color: white; font-size: 2.8em; margin-left: 1%;">' + document.getElementById('golesVisita').value + '</div>' +
                        '  </div>' +
                        '</div>';

        
                var resumenTiempoElement = document.getElementById('resumenTiempo')
                
                function actualizarLogo(id, rutaLogo) {
                    // Obtiene el elemento div por su ID
                    var divLogo = document.getElementById(id);

                    // Verifica si el div existe antes de intentar cambiar la imagen
                    if (divLogo) {
                        // Cambia la imagen del div
                        divLogo.innerHTML = '<img src="' + rutaLogo + '" alt="Team Logo" style="width: 50px; background-color: rgb(199, 199, 199); height: auto; object-fit: cover; border-radius: 10%; margin-right: 1px;">';
                    }
                }

                function actualizarResumenTiempo(valor) {
                    resumenTiempoElement.innerText = valor;
                }


        // Verifica si se seleccionó el Final 1º Tiempo
        if (radioboton.checked) {
            actualizarResumenTiempo(document.getElementById('f1Checkbox').value);
        }
        else if (radioboton2.checked) {
            actualizarResumenTiempo(document.getElementById('f2Checkbox').value);
        }

        // Verifica si se seleccionó el Final Tiempo Extra
        else if (radioboton3.checked) {
            actualizarResumenTiempo(document.getElementById('feCheckbox').value);
        }

        // Verifica si se seleccionó el Final + Penales
        else if (radioboton4.checked) {
            actualizarResumenTiempo(document.getElementById('fpCheckbox').value);
        }

        // Verifica si se seleccionó el Estadio
        if (casilla.checked) {
            html += '<div class="stadium-info" name="estadio" style="text-align: left; padding-left: 10px;">' + document.getElementById('estadioMarcadorCompleto').value + '</div>';
        }

        html += '</div>';

        // Verifica si se seleccionó la Insignia de Equipo 
        if (casilla2.checked) {
            // Llamada para actualizar el logo local
            actualizarLogo('equipo1', '/static/images/' + document.getElementById('logoLocal').value);

            // Llamada para actualizar el logo de visita
            actualizarLogo('equipo2', '/static/images/' + document.getElementById('logoVisita').value);
        }

        html += '</div>';

        // Cierre de la etiqueta principal
        html += '</div>';

        // Devuelve el HTML generado
        return html;

    }



    // document.getElementById('generarBannerEncuentro').addEventListener('click', function (event) {
    //     // Evita que el formulario se envíe automáticamente
    //     // event.preventDefault();

    //     const textarea = document.getElementById('miTextarea');

    //     // Crea el contenido que deseas colocar en el textarea
    //     const contenido = 'Este es el contenido que quiero colocar en el textarea.';

    //     // Establece el contenido en el textarea
    //     textarea.value = contenido;

    //     // Envía el formulario
    //     document.getElementById('enviarDatosEncuentro').submit();



    //     // Crea el contenido que deseas colocar en el textarea
    //     contenido = 'Este es el contenido que quiero colocar en el textarea.';

    //     // Establece el contenido en el textarea
    //     textarea.value = contenido;
    // });
    // document.addEventListener('DOMContentLoaded', function () {

    // Función para generar el HTML dinámico
    function generarHTML() {
        const checkbox1 = document.getElementById('temperaturaCheckbox');
        const checkbox2 = document.getElementById('marcadorCheckbox');
        const checkbox3 = document.getElementById('estadioCheckbox');
        const checkbox4 = document.getElementById('tipoEncuentroCheckbox');
        const checkbox5 = document.getElementById('patrocinadorCheckbox');

        // const idEncuentro = 2
        let html = '';
        //
        // Construye dinámicamente el HTML del banner
        html = '<div class="banner">';
        // Equipo Local
        html += '<div class="equipo-info">';

        // Verifica si el checkbox 2 está seleccionado
        if (checkbox2.checked) {
            html += '<p class="goles-equipo">' + document.getElementById('golesLocal').value + '</p>';
        }
        html += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
        html += '<p class="nombre-equipo">' + document.getElementById('nombreLocal').value + '</p>';
        html += '<img src="/static/images/' + document.getElementById('logoLocal').value + '" alt="Equipo Local">';
        //
        // Verifica si el checkbox 1 está seleccionado
        if (checkbox1.checked) {
            html += ''
        }
        html += '</div>';
        html += '</div>';

        // Versus
        html += '<div class="versus">VS</div>';

        // Equipo Visitante
        html += '<div class="equipo-info">';
        html += '<div class="row" style="display: flex; flex-direction: column; align-items: center;">';
        html += '<p class="nombre-equipo">' + document.getElementById('nombreVisita').value + '</p>';
        html += '<img src="/static/images/' + document.getElementById('logoVisita').value + '" alt="Equipo Visitante">';
        if (checkbox4.checked) {
            html += '<p>' + document.getElementById('tipoEncuentroCheckbox').value + '</p>';
        }

        html += '</div>';
        if (checkbox2.checked) {
            html += '<p class="goles-equipo">' + document.getElementById('golesVisita').value + '</p>';
        }

        html += '</div>';

        html += '</div>';

        // Devuelve el HTML generado
        return html;
    }    
    
    document.getElementById('generarBannerEncuentro').addEventListener('click', function (event) {
        // Evita que el formulario se envíe automáticamente
        // event.preventDefault();

        const textarea = document.getElementById('miTextarea');
        let contenido = '';
        contenido += generarHTML();
        textarea.value = contenido;


        console.log(contenido);

        escribirDatos(contenido, 'enviarDatosEncuentro')

    });

    document.getElementById('generarBannerHimno').addEventListener('click', function (event) {
        // Evita que el formulario se envíe automáticamente
        // event.preventDefault();
        console.log(contenido);

        escribirDatos(contenido, 'enviarDatosEncuentro')

    });
    //BOTON MOSTRAR
    document.getElementById('generarBannerHimno').addEventListener('click', function (event) {
        // Evita que el formulario se envíe automáticamente
        // event.preventDefault();

        const textarea = document.getElementById('miTextarea'); // Esta en los html de arriba linea sola
        let contenido = '';
        contenido += generarHTMLHimno(); //VERIFICAS SI ESTA MARCADO SEGUN LA OPCION SEGUN PANTALLA
        textarea.value = contenido;


        console.log(contenido);
        console.log(contenido);

        escribirDatos(contenido, 'enviarDatosHimno') // Muestra en TV (id del formulario)

    });

    document.getElementById('generarBannerMarcador').addEventListener('click', function (event) {
        // Evita que el formulario se envíe automáticamente
        // event.preventDefault();

        const textarea = document.getElementById('miTextarea'); // Esta en los html de arriba linea sola
        let contenido = '';
        contenido += generarHTMLMarcadorCompleto(); //VERIFICAS SI ESTA MARCADO SEGUN LA OPCION SEGUN PANTALLA
        textarea.value = contenido;

        console.log(contenido);

        escribirDatos(contenido, 'enviarDatosMarcadorCompleto') // Muestra en TV (id del formulario)

    });


    function escribirDatos(contenido, idBoton) {
        // Agrega el valor del textarea como un nuevo campo al formulario antes de enviarlo
        const formulario = document.getElementById(idBoton);
        const nuevoCampo = document.createElement('input');
        nuevoCampo.type = 'hidden';
        nuevoCampo.name = 'miTextarea';
        nuevoCampo.value = contenido;
        formulario.appendChild(nuevoCampo);
        escribirDatos(contenido, 'enviarDatosHimno')

    };

    function escribirDatos(contenido, idBoton) {
        // Agrega el valor del textarea como un nuevo campo al formulario antes de enviarlo
        const formulario = document.getElementById(idBoton);
        const nuevoCampo = document.createElement('input');
        nuevoCampo.type = 'hidden';
        nuevoCampo.name = 'miTextarea';
        nuevoCampo.value = contenido;
        formulario.appendChild(nuevoCampo);

        // Envía el formulario
        formulario.submit();
    }

    //
    function generarHTMLAlieacion(tipo, datos) {
        let html = '';

        if (tipo) {

            //
            html = '<div class="banner-container" style="display: absolute;top: -380px; left:20%; justify-content: center; align-items: center; height: 100vh; background-size: cover;">' +
                '<div class="banner" style="background: rgba(0, 0, 0, 0.7); color: white; border-radius: 5px; font-family: \'Arial\', sans-serif; display: flex; width: 500px; ">' +
                '<div class="left-side" style="padding: 20px; display: flex; flex-direction: column; align-items: center; background: rgba(0, 0, 0, 0.8);">' +
                '<span class="team-name" style="font-size: 24px; font-weight: bold; margin-bottom: 10px;">' + document.getElementById('nombreLocal').value + '</span>' +
                '<img src="/static/images/' + document.getElementById('logoLocal').value + '" alt="Team Logo" class="team-logo" style="width: 150px; height: auto; margin-bottom: 20px;">' +
                '<div class="formation" style="font-size: 18px; font-weight: bold; background: rgba(0, 0, 0, 0.8); padding: 5px; border-radius: 5px; width: 100%; text-align: center;">4-2-3-1</div>' +
                '</div>' +
                '<div class="middle-side" style="display: flex; align-items: center; background: rgba(50, 50, 50, 0.8); padding: 0 10px;">' +
                '<span class="title" style="font-size: 16px; font-weight: bold; color: white; writing-mode: vertical-lr; transform: rotate(180deg);">TITULARES</span>' +
                '</div>' +
                '<div class="right-side" style="padding: 20px; display: flex; flex-direction: column; align-items: flex-start;">' +
                '<div class="player-list" style="display: flex; flex-direction: column;">';





            //

            for (var i = 0; i < datos.length; i++) {
                var fila = datos[i];
                console.log("El estado es", fila.estado);
                if (fila.estado == 'True') {

                    html += '<div class="player" style="font-size: 12px; line-height: 1.4; text-align: left;">' +
                        '<span class="dorsal" style="font-weight: bold; margin-right: 5px;">' + fila.dorsal + '</span>' +
                        '<span class="name" style="font-weight: normal;">' + fila.jugador + ' ' + fila.posicion + '</span>' +
                        '</div>';
                }

            }


            html += '<!-- Puedes replicar este bloque para cada jugador en tu lista -->' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>';

        } else {


            const checkbox1 = document.getElementById('LtarjetasAmarillasCheckbox');
            const checkbox2 = document.getElementById('LtarjetasRojasCheckbox');
            const checkbox3 = document.getElementById('LgolesTotalesCheckbox');
            const checkbox4 = document.getElementById('LpatrocinadorCheckbox');


            if (checkbox1.checked){
                obtenerResultado(1, datos.idContrato);
            } else if (checkbox2.checked){
                obtenerResultado(2, datos.idContrato);
            }else {
                obtenerResultado(3, datos.idContrato);
            }
            
            console.log("Variable final",miVariable);

            html = '<div class="banner" style="display: flex;' +
                'align-items: center;' +
                'padding: 20px;' +
                'background-color: rgba(0, 0, 0, 0.7);' +
                'border: 1px solid #ddd;' +
                'border-radius: 5px;' +
                'box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); position: absolute;top: -80px; left: 20%; background-color: rgba(0, 0, 0, 0.7); color: white; text-align: center; width: 70%; max-width: 500px; font-size: 13px; border-radius: 5px;"     >' +

                '<!-- Primera fila -->' +
                '<div class="row" style="display: flex;' +
                'align-items: center;' +
                'margin-bottom: 10px;">' +

                '<img src="/static/images/' + document.getElementById('logoLocal').value + '" alt="Logo 1" class="logo" style="width: 50px;' +
                'height: 50px;' +
                'object-fit: cover;' +
                'border-radius: 50%;' +
                'margin-right: 10px;">' +

                '</div>' +

                '<!-- Segunda fila -->' +
                '<div class="col">' +
                '<div class="row" style="display: flex;">' +
                '<div class="player-info" style="font-size: 16px; font-weight: bold; text-align: center;' +
                'background-color: red; color: white;">' +
                '<div class="player-dorsal" style="display: inline-block;">' + datos.dorsal + '</div>' +
                '&nbsp;' +
                '<div class="player-name" style="display: inline-block;"> ' + datos.jugador + ' </div>' +
                '</div>' +
                '</div>' +

                '<div class="row">' +
                '<div class="user-text" style="font-size: 16px; text-align: center;' +
                'background-color: rgba(0, 0, 0, 0.7); color: white; ">' +

                'Jugador del momento '+miVariable+' </div>' +
                '</div>' +
                '</div>' +

                '<!-- Tercera fila -->' +
                '<div class="row">' +
                '<img src="sponsor2.png" alt="Sponsor 2" class="sponsor-logo" style="width: 50px;' +
                'height: 50px;' +
                'object-fit: cover;' +
                'border-radius: 50%;' +
                'margin-right: 10px;">' +
                '</div>' +
                '</div>';

            // Ahora puedes utilizar la variable `html` como desees, por ejemplo, insertarla en el cuerpo de un documento HTML.
            console.log(html);

        }

        // Devuelve el HTML generado
        return html;
    }


    ///Aqui lo demás

    document.getElementById('generarBannerAlineacionLocal').addEventListener('click', function () {

        const checkbox1 = document.getElementById('mostrarAlineacionLocalCheckbox');


        if (checkbox1.checked) {

            const textarea = document.getElementById('miTextarea');
            let contenido = '';
            contenido += generarHTMLAlieacion(true, extraerDatosTabla('tablaLocal'));
            textarea.value = contenido;
            console.log(contenido);
            escribirDatos(contenido, 'enviarDatosAlineacionLocal')


        } else {


            console.log("Dorsal: " + datos_local);

            const textarea = document.getElementById('miTextarea');
            let contenido = '';
            contenido += generarHTMLAlieacion(false, datos_local);
            textarea.value = contenido;

            console.log(contenido);

            escribirDatos(contenido, 'enviarDatosAlineacionLocal')
        }
    });

    var datos_local = '';
    var datos_visita = '';

    function capturarDatos(tipo_alineacion, indice) {
        console.log("Capturar datos para índice: " + indice);
        alineacion_temporal = ''
        alineacion_temporal += tipo_alineacion;
        alineacion_temporal += indice;
        console.log(alineacion_temporal);
        // var radioSeleccionado = document.getElementById("alineacionLocal" + indice);
        var radioSeleccionado = document.getElementById(alineacion_temporal);
        console.log("Radio seleccionado:", radioSeleccionado);

        // if (radioSeleccionado.checked) {
        var fila = radioSeleccionado.closest("tr");

        if (tipo_alineacion == 'alineacionLocal') {

            datos_local = {
                dorsal: obtenerValorCelda(fila, 1),
                jugador: obtenerValorCelda(fila, 2),
                posicion: obtenerValorCelda(fila, 3),
                estado: obtenerValorCelda(fila, 4),
                idContrato: obtenerValorCelda(fila, 5)

            };

            console.log("Dorsal: " + datos_local.dorsal);
            console.log("Jugador: " + datos_local.jugador);
            console.log("Posicion: " + datos_local.posicion);
            console.log("Estado: " + datos_local.estado);
            console.log("Contrato: " + datos_local.idContrato);


            return datos_local;
        }

        if (tipo_alineacion == 'alineacionVisita') {

            datos_visita = {
                dorsal: obtenerValorCelda(fila, 1),
                jugador: obtenerValorCelda(fila, 2),
                posicion: obtenerValorCelda(fila, 3),
                estado: obtenerValorCelda(fila, 4)
            };

            console.log("Dorsal: " + datos_visita.dorsal);
            console.log("Jugador: " + datos_visita.jugador);
            console.log("Posicion: " + datos_visita.posicion);
            console.log("Estado: " + datos_visita.estado);


            return datos_visita;
        }

        return null;


    }

    function obtenerValorCelda(fila, indiceCelda) {
        return fila.querySelector("td:nth-child(" + indiceCelda + ")").innerText;
    }

    function obtenerIndiceFila(elemento) {
        var fila = elemento.closest('tr');
        return Array.from(fila.parentElement.children).indexOf(fila);
    }


    //tablas
    function extraerDatosTabla(idTabla) {
        var tabla = document.getElementById(idTabla);
        datos_coleccion = [];

        // Verifica que la tabla existe
        if (tabla) {
            var filas = tabla.getElementsByTagName('tr');

            // Itera sobre todas las filas (ignorando la primera que suele ser el encabezado)
            for (var i = 1; i < filas.length; i++) {
                var celdas = filas[i].getElementsByTagName('td');
                var filaDatos = {
                    dorsal: celdas[0].innerText,
                    jugador: celdas[1].innerText,
                    posicion: celdas[2].innerText,
                    estado: celdas[3].innerText
                };
                datos_coleccion.push(filaDatos);
            }
        } else {
            console.error('La tabla no se encontró en el DOM.');
        }

        return datos_coleccion;
    }
    //fin tablas
    // SOLICITUD AJAX
    function obtenerResultado(tipo, idContrato) {
        // Hacer la solicitud AJAX
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/apitarjetas/' + tipo + '/' + idContrato + '/');
        xhr.onload = function () {
            if (xhr.status === 200) {
                // Manejar la respuesta del servidor
                var respuesta = JSON.parse(xhr.responseText);
                var resultado = respuesta.resultado;

                // Hacer lo que quieras con el resultado
                console.log("El resultado es:", resultado);

                // Almacenar el resultado en una variable
                miVariable = resultado;
                console.log("La variable es",miVariable);

                // Hacer más cosas con miVariable si es necesario
            } else {
                console.error('Error en la solicitud AJAX');
            }
        };
        xhr.send();
    }
    //
    //
</script>

<script>
    var inputcrono = document.getElementById('tiempoCrono');
    var btnlimpiar = document.getElementById('btnlimpiarplay');
    btnlimpiar.addEventListener('click', function () {
        console.log('entrando la funcion limpiar');
        inputcrono.value = '';
    });

    function enviarComando(accion) {
        var tiempo = document.getElementById('tiempoCrono').value;


        fetch('/actualizar_cronometro/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': obtenerCSRFToken()  // Asegúrate de definir esta función para obtener el token CSRF
            },
            body: JSON.stringify({ accion: accion, tiempo: tiempo })

        })
            .then(function (response) {
                if (!response.ok) {
                    throw new Error('Error en la solicitud AJAX');
                }
                return response.json();
            })
            .then(function (data) {
                console.log('respuesta correcta')


            })
            .catch(function (error) {
                console.error('Error en la solicitud AJAX', error);
            });
    }

    // Función para obtener el token CSRF del formulario
    function obtenerCSRFToken() {
        var csrfTokenElement = document.getElementsByName('csrfmiddlewaretoken')[0];
        return csrfTokenElement.value;
    }

</script>

<textarea id="miTextarea" name="miTextarea" style="display: none;"></textarea>




{% endblock %}